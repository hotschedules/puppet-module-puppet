# vim: tabstop=2 expandtab shiftwidth=2 softtabstop=2 foldmethod=marker
---
:backends:
  - yaml

:hierarchy:
  - "certs/%{clientcert}"
  - "hosts/%{hostname}"
  - "environment/%{environment}/%{operatingsystem}-%{lsbdistrelease}"     # Linux only
  - "environment/%{environment}/%{operatingsystem}-%{lsbmajdistrelease}"  # Linux only
  - "environment/%{environment}/%{operatingsystem}" # NOTE: Windows only (win_facts module)
  - "environment/%{environment}/%{operatingsystem}"
  - "environment/%{environment}/%{osfamily}"
  - "environment/%{environment}/%{kernel}"
  - "environment/%{environment}/defaults"
  - "network/%{subnetwork}/%{operatingsystem}-%{lsbdistrelease}"     # Linux only
  - "network/%{subnetwork}/%{operatingsystem}-%{lsbmajdistrelease}"  # Linux only
  - "network/%{subnetwork}/%{operatingsystem}" # NOTE: Windows only (win_facts module)
  - "network/%{subnetwork}/%{operatingsystem}"
  - "network/%{subnetwork}/%{osfamily}"
  - "network/%{subnetwork}/%{kernel}"
  - "network/%{subnetwork}/defaults"
  - "network/%{network}/%{operatingsystem}-%{lsbdistrelease}"     # Linux only
  - "network/%{network}/%{operatingsystem}-%{lsbmajdistrelease}"  # Linux only
  - "network/%{network}/%{operatingsystem}" # NOTE: Windows only (win_facts module)
  - "network/%{network}/%{operatingsystem}"
  - "network/%{network}/%{osfamily}"
  - "network/%{network}/%{kernel}"
  - "network/%{network}/defaults"
  - "os/%{operatingsystem}-%{lsbdistrelease}"     # Linux only
  - "os/%{operatingsystem}-%{lsbmajdistrelease}"  # Linux only
  - "os/%{operatingsystem}" # NOTE: Windows only (win_facts module)
  - "os/%{operatingsystem}"
  - "os/%{osfamily}"
  - "os/%{kernel}"
  - "defaults"

:yaml:

# datadir is empty here, so hiera uses its defaults:
# - /var/lib/hiera on *nix
# - %CommonAppData%\PuppetLabs\hiera\var on Windows
# When specifying a datadir, make sure the directory exists.
  :datadir: "/etc/puppet/environments/%{environment}/hiera/"

:merge_behavior: deeper
